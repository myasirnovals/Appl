@startuml
actor User
participant "ChangePasswordPage" as UI
participant "UserController" as Controller
participant "UserService" as Service
participant "User" as Entity

User -> UI : Buka halaman ubah password
User -> UI : Input password lama & baru\nKlik Simpan
UI -> Controller : changePassword(oldPwd, newPwd)
Controller -> Service : validateOldPassword(userId, oldPwd)
Service -> Entity : getUserById(userId)
Entity --> Service : userData
Service -> Service : verifyPassword(userData, oldPwd)
alt Password lama benar
    Service -> Entity : updatePassword(userId, newPwd)
    Entity --> Service : passwordUpdated
    Service -> Controller : changeSuccess()
    Controller -> UI : Tampilkan pesan sukses
else Password lama salah
    Service -> Controller : changeFailed(error)
    Controller -> UI : Tampilkan pesan error
end
@enduml
