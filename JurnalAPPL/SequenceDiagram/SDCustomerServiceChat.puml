@startuml
actor User
actor "Employee" as Agent

participant "ChatPage (User)" as UserUI
participant "ChatPage (CS Agent)" as AgentUI
participant "ChatController" as Controller
participant "ChatService" as Service
participant "ChatMessageEntity" as ChatEntity

== User mengirim pesan ==
User -> UserUI : Tulis pesan, klik Kirim
UserUI -> Controller : sendMessage(userId, message)
Controller -> Service : saveMessage(userId, message)
Service -> ChatEntity : createMessage(userId, message)
ChatEntity --> Service : success
Service -> Controller : success
Controller -> AgentUI : pushMessageToAgent(message)

== CS Agent membalas ==
Agent -> AgentUI : Tulis balasan, klik Kirim
AgentUI -> Controller : sendMessage(agentId, message)
Controller -> Service : saveMessage(agentId, message)
Service -> ChatEntity : createMessage(agentId, message)
ChatEntity --> Service : success
Service -> Controller : success
Controller -> UserUI : pushMessageToUser(message)

@enduml
