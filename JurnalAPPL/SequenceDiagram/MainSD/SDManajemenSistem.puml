@startuml
title Sequence Diagram - Manajemen Sistem (Dashboard, Laporan, Backup, Monitoring, Role & Permission)

actor Admin
participant "Web Admin" as App
participant "SystemController" as Controller
participant "SystemService" as Service
participant "ReportService" as Report
participant "BackupService" as Backup
participant "MonitoringService" as Monitor
participant "RolePermissionService" as RolePerm
database "Database" as DB
database "Storage" as Storage

== Melihat Dashboard ==
Admin -> App : Login & akses dashboard
activate App
App -> Controller : getDashboardData()
activate Controller
Controller -> Service : fetchDashboardStats()
activate Service
Service -> DB : query statistik & summary
activate DB
DB --> Service : data dashboard
deactivate DB
Service --> Controller : dashboard data
deactivate Service
Controller --> App : tampilkan dashboard
deactivate Controller
deactivate App

== Kelola Laporan ==
Admin -> App : Pilih menu laporan
activate App
App -> Controller : getReportList()
activate Controller
Controller -> Report : fetchReports()
activate Report
Report -> DB : query laporan
activate DB
DB --> Report : data laporan
deactivate DB
Report --> Controller : report list
deactivate Report
Controller --> App : tampilkan daftar laporan
deactivate Controller
deactivate App

Admin -> App : Lihat detail laporan
activate App
App -> Controller : getReportDetail(reportId)
activate Controller
Controller -> Report : fetchReportDetail(reportId)
activate Report
Report -> DB : query detail laporan
activate DB
DB --> Report : report detail
deactivate DB
Report --> Controller : report detail
deactivate Report
Controller --> App : tampilkan detail
deactivate Controller
deactivate App

== Export Laporan ==
Admin -> App : Klik export laporan
activate App
App -> Controller : exportReport(reportId, format)
activate Controller
Controller -> Report : generateExport(reportId, format)
activate Report
Report -> DB : ambil data laporan
activate DB
DB --> Report : report data
deactivate DB
Report -> Storage : simpan file export (pdf/xls/csv)
activate Storage
Storage --> Report : file url/link
deactivate Storage
Report --> Controller : export link
deactivate Report
Controller --> App : tampilkan/download link
deactivate Controller
deactivate App

== Backup Data ==
Admin -> App : Pilih menu backup data
activate App
App -> Controller : requestBackup()
activate Controller
Controller -> Backup : generateBackup()
activate Backup
Backup -> DB : dump data
activate DB
DB --> Backup : data dump
deactivate DB
Backup -> Storage : simpan file backup
activate Storage
Storage --> Backup : backup file url
deactivate Storage
Backup --> Controller : backup link
deactivate Backup
Controller --> App : tampilkan link backup
deactivate Controller
deactivate App

== Monitoring Sistem ==
Admin -> App : Akses monitoring sistem
activate App
App -> Controller : getSystemStatus()
activate Controller
Controller -> Monitor : fetchSystemHealth()
activate Monitor
Monitor -> DB : query status sistem/log
activate DB
DB --> Monitor : status/log data
deactivate DB
Monitor --> Controller : system health data
deactivate Monitor
Controller --> App : tampilkan status sistem
deactivate Controller
deactivate App

== Kelola Role & Permission ==
Admin -> App : Kelola role/permission
activate App
App -> Controller : getRoleList()
activate Controller
Controller -> RolePerm : fetchRoles()
activate RolePerm
RolePerm -> DB : query roles
activate DB
DB --> RolePerm : role list
deactivate DB
RolePerm --> Controller : role list
deactivate RolePerm
Controller --> App : tampilkan role
deactivate Controller
deactivate App

Admin -> App : Update permission
activate App
App -> Controller : updatePermission(roleId, permission)
activate Controller
Controller -> RolePerm : updatePermission(roleId, permission)
activate RolePerm
RolePerm -> DB : update role-permission
activate DB
DB --> RolePerm : success
deactivate DB
RolePerm --> Controller : success
deactivate RolePerm
Controller --> App : Permission diperbarui
deactivate Controller
deactivate App

' Destruction (opsional, aktifkan jika ingin menampilkan objek di-destroy)
' destroy App
' destroy Controller
' destroy Service
' destroy Report
' destroy Backup
' destroy Monitor
' destroy RolePerm
' destroy DB
' destroy Storage

@enduml
