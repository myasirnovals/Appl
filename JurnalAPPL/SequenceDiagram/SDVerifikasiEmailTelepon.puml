@startuml
actor User
participant "VerificationPage" as UI
participant "AuthController" as Controller
participant "AuthService" as Service
participant "User" as Entity
participant "EmailService/SMSService" as Notif

== Pengiriman kode/link verifikasi ==
User -> UI : Registrasi/Update Email/Telepon
UI -> Controller : requestVerification(userId, email/phone)
Controller -> Service : generateVerificationToken(userId)
Service -> Entity : saveVerificationToken(userId, token)
Entity --> Service : tokenSaved
Service -> Notif : sendVerification(email/phone, token)
Notif --> Service : sent
Service -> Controller : verificationSent()
Controller -> UI : Tampilkan instruksi verifikasi

== Proses verifikasi ==
User -> UI : Klik link/input kode verifikasi
UI -> Controller : verifyToken(token)
Controller -> Service : validateVerificationToken(token)
Service -> Entity : getUserByToken(token)
alt Token valid
    Entity --> Service : userData
    Service -> Entity : updateVerifiedStatus(userId)
    Entity --> Service : statusUpdated
    Service -> Controller : verificationSuccess()
    Controller -> UI : Tampilkan pesan sukses
else Token tidak valid/expired
    Service -> Controller : verificationFailed(error)
    Controller -> UI : Tampilkan pesan error
end
@enduml
